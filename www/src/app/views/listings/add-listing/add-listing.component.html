<div class="container mt-5">
  <!-- Stepper navigation -->
  <ul class="nav nav-pills mb-4">
    <li class="nav-item me-2" *ngFor="let step of steps">
      <button
        class="btn"
        [class.active]="currentStep() === step.id"
        [class.btn-primary]="currentStep() === step.id"
        [class.btn-outline-secondary]="currentStep() !== step.id"
        (click)="goToStep(step.id)"
      >
        {{ step.label }}
      </button>
    </li>
  </ul>

  <form [formGroup]="listingForm">
    <!-- Step 1 : Identit√© / Besoin -->
    <div *ngIf="currentStep() === 1">
      <div class="mb-3">
        <label class="form-label">Quel est votre besoin ?</label>
        <select class="form-select" formControlName="need">
          <option value="" disabled selected>
            -- S√©lectionnez votre option --
          </option>
          <option value="voyageur">Je suis voyageur</option>
          <option value="chercheur">Je recherche un voyageur</option>
        </select>
      </div>
      <div class="mb-3">
        <label class="form-label">Nom et pr√©nom</label>
        <input type="text" class="form-control" formControlName="fullName" />
      </div>
      <div class="mb-3">
        <label class="form-label">Num√©ro de t√©l√©phone</label>
        <input type="text" class="form-control" formControlName="phone" />
      </div>
      <div class="mb-3">
        <label class="form-label">Adresse mail</label>
        <input type="email" class="form-control" formControlName="email" />
      </div>

      <button
        class="btn btn-primary"
        type="button"
        (click)="nextStep()"
        [disabled]="!isStepValid(1)"
      >
        Suivant
      </button>
    </div>

    <!-- Step 2 : Voyage / Colis -->
    <div *ngIf="currentStep() === 2">
      <div class="mb-3">
        <label class="form-label">Date de d√©part</label>
        <input
          type="date"
          class="form-control"
          formControlName="departureDate"
        />
      </div>
      <div class="mb-3">
        <label class="form-label">Date d‚Äôarriv√©e</label>
        <input type="date" class="form-control" formControlName="arrivalDate" />
      </div>
      <div class="mb-3">
        <label class="form-label">Nombre de kilo</label>
        <input type="number" class="form-control" formControlName="weight" />
      </div>
      <div class="mb-3">
        <label class="form-label">Prix au kilo (‚Ç¨)</label>
        <input
          type="number"
          class="form-control"
          formControlName="pricePerKg"
        />
      </div>
      <div class="mb-3">
        <label class="form-label">Pays de d√©part</label>
        <input
          type="text"
          class="form-control"
          formControlName="departureCountry"
        />
      </div>
      <div class="mb-3">
        <label class="form-label">Ville de d√©part</label>
        <input
          type="text"
          class="form-control"
          formControlName="departureCity"
        />
      </div>
      <div class="mb-3">
        <label class="form-label">Pays d'arriv√©e</label>
        <input
          type="text"
          class="form-control"
          formControlName="arrivalCountry"
        />
      </div>
      <div class="mb-3">
        <label class="form-label">Ville d‚Äôarriv√©e</label>
        <input type="text" class="form-control" formControlName="arrivalCity" />
      </div>

      <button class="btn btn-secondary me-2" type="button" (click)="prevStep()">
        Pr√©c√©dent
      </button>
      <button
        class="btn btn-primary"
        type="button"
        (click)="nextStep()"
        [disabled]="!isStepValid(2)"
      >
        Suivant
      </button>
    </div>

    <!-- Step 3 : Infos suppl√©mentaires -->
    <div *ngIf="currentStep() === 3">
      <div class="mb-3">
        <label class="form-label">Description du colis</label>
        <textarea
          class="form-control"
          formControlName="packageDescription"
        ></textarea>
      </div>
      <div class="mb-3">
        <label class="form-label">Informations du destinataire</label>
        <input
          type="text"
          class="form-control"
          formControlName="recipientInfo"
        />
      </div>
      <div class="mb-3">
        <label class="form-label">Code secret pour r√©ception</label>
        <input type="text" class="form-control" formControlName="secretCode" />
      </div>

      <button class="btn btn-secondary me-2" type="button" (click)="prevStep()">
        Pr√©c√©dent
      </button>
      <button
        class="btn btn-primary"
        type="button"
        (click)="nextStep()"
        [disabled]="!isStepValid(3)"
      >
        Suivant
      </button>
    </div>

    <!-- Step 4 : Paiement et validation -->
    <div *ngIf="currentStep() === 4">
      <div class="mb-3">
        <label class="form-label">Moyen de paiement</label>
        <input
          type="text"
          class="form-control"
          formControlName="paymentMethod"
        />
      </div>
      <div class="mb-3">
        <label class="form-label">Tranche d‚Äô√¢ge</label>
        <input type="text" class="form-control" formControlName="ageRange" />
      </div>
      <div class="form-check mb-3">
        <input
          type="checkbox"
          class="form-check-input"
          formControlName="acceptTerms"
        />
        <label class="form-check-label"
          >Acceptez-vous les termes du contrat ?</label
        >
      </div>

      <button class="btn btn-secondary me-2" type="button" (click)="prevStep()">
        Pr√©c√©dent
      </button>
      <button
        class="btn btn-success"
        type="button"
        (click)="submit()"
        [disabled]="!isStepValid(4)"
      >
        Cr√©er l'annonce
      </button>
    </div>

    <!-- Step 5 : Confirmation -->
    <div *ngIf="currentStep() === 5" class="text-center mt-5">
      <h2>F√©licitations ! üéâ</h2>
      <p>Votre annonce a √©t√© cr√©√©e avec succ√®s.</p>
    </div>
  </form>
</div>
